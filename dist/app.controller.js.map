{"version":3,"sources":["../src/app.controller.ts"],"sourcesContent":["import { Controller, Get } from '@nestjs/common';\nimport { AppService } from './app.service';\nimport { clientConfig } from './config/app-client-config';\nimport { SupabaseService } from './supabase/supabase.service';\n\n@Controller()\nexport class AppController {\n  constructor(\n    private readonly appService: AppService,\n    private readonly supabaseService: SupabaseService,\n  ) {}\n\n  @Get('health')\n  async healthCheck() {\n    console.log(\n      `health check from ${clientConfig().host}:${clientConfig().port}`,\n    );\n\n    const supabaseClient = this.supabaseService.getClient();\n    const { data, error } = await supabaseClient.from('dev_post').select('*');\n\n    if (error) {\n      return {\n        status: 'error',\n        error: error.message,\n      };\n    }\n\n    return {\n      status: 'ok',\n      data,\n    };\n  }\n}\n"],"names":["AppController","healthCheck","console","log","clientConfig","host","port","supabaseClient","supabaseService","getClient","data","error","from","select","status","message","appService"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANmB;4BACL;iCACE;iCACG;;;;;;;;;;AAGzB,IAAA,AAAMA,gBAAN,MAAMA;IAMX,MACMC,cAAc;QAClBC,QAAQC,GAAG,CACT,CAAC,kBAAkB,EAAEC,IAAAA,6BAAY,IAAGC,IAAI,CAAC,CAAC,EAAED,IAAAA,6BAAY,IAAGE,IAAI,EAAE;QAGnE,MAAMC,iBAAiB,IAAI,CAACC,eAAe,CAACC,SAAS;QACrD,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAE,GAAG,MAAMJ,eAAeK,IAAI,CAAC,YAAYC,MAAM,CAAC;QAErE,IAAIF,OAAO;YACT,OAAO;gBACLG,QAAQ;gBACRH,OAAOA,MAAMI,OAAO;YACtB;QACF;QAEA,OAAO;YACLD,QAAQ;YACRJ;QACF;IACF;IAzBA,YACE,AAAiBM,UAAsB,EACvC,AAAiBR,eAAgC,CACjD;aAFiBQ,aAAAA;aACAR,kBAAAA;IAChB;AAuBL"}