{"version":3,"sources":["../../src/tags/tag.resolver.ts"],"sourcesContent":["import { Args, Int, Query, Resolver } from '@nestjs/graphql';\nimport { Tags } from './entities/tags.entity';\nimport { TagsOrderBy } from './enums/order-by.enum';\nimport { TagsService } from './tag.service';\n\n@Resolver(() => Tags)\nexport class TagsResolver {\n  constructor(private readonly tagsService: TagsService) {}\n\n  @Query(() => [Tags])\n  async getAllTags(\n    @Args('orderBy', {\n      type: () => TagsOrderBy,\n      defaultValue: TagsOrderBy.CREATED_AT,\n    })\n    orderBy: TagsOrderBy,\n  ) {\n    return await this.tagsService.getAllTags(orderBy);\n  }\n\n  @Query(() => [Tags], { name: 'popularTags' })\n  async getPopularTags(\n    @Args('limit', { type: () => Int, defaultValue: 10 }) limit: number,\n  ) {\n    const popularTags = await this.tagsService.getPopularTags(limit);\n    return popularTags.map((tag) => ({\n      ...tag,\n      usage_count: tag._count.post_tags,\n    }));\n  }\n\n  @Query(() => [Tags], { name: 'tagUsageStats' })\n  async getTagUsageStats() {\n    const tagStats = await this.tagsService.getTagUsageStats();\n    return tagStats.map((tag) => ({\n      id: tag.id,\n      tag_name: tag.tag_name,\n      created_at: tag.created_at,\n      usage_count: tag._count.post_tags,\n    }));\n  }\n}\n"],"names":["TagsResolver","getAllTags","orderBy","tagsService","getPopularTags","limit","popularTags","map","tag","usage_count","_count","post_tags","getTagUsageStats","tagStats","id","tag_name","created_at","Tags","type","TagsOrderBy","defaultValue","CREATED_AT","name","Int"],"mappings":";;;;+BAMaA;;;eAAAA;;;yBAN8B;4BACtB;6BACO;4BACA;;;;;;;;;;;;;;;AAGrB,IAAA,AAAMA,eAAN,MAAMA;IAGX,MACMC,WACJ,AAIAC,OAAoB,EACpB;QACA,OAAO,MAAM,IAAI,CAACC,WAAW,CAACF,UAAU,CAACC;IAC3C;IAEA,MACME,eACJ,AAAsDC,KAAa,EACnE;QACA,MAAMC,cAAc,MAAM,IAAI,CAACH,WAAW,CAACC,cAAc,CAACC;QAC1D,OAAOC,YAAYC,GAAG,CAAC,CAACC,MAAS,CAAA;gBAC/B,GAAGA,GAAG;gBACNC,aAAaD,IAAIE,MAAM,CAACC,SAAS;YACnC,CAAA;IACF;IAEA,MACMC,mBAAmB;QACvB,MAAMC,WAAW,MAAM,IAAI,CAACV,WAAW,CAACS,gBAAgB;QACxD,OAAOC,SAASN,GAAG,CAAC,CAACC,MAAS,CAAA;gBAC5BM,IAAIN,IAAIM,EAAE;gBACVC,UAAUP,IAAIO,QAAQ;gBACtBC,YAAYR,IAAIQ,UAAU;gBAC1BP,aAAaD,IAAIE,MAAM,CAACC,SAAS;YACnC,CAAA;IACF;IAjCA,YAAY,AAAiBR,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AAkC1D;;4BAhCe;YAACc,gBAAI;SAAC;;QAGfC,MAAM,IAAMC,wBAAW;QACvBC,cAAcD,wBAAW,CAACE,UAAU;;;;;;;;;4BAO3B;YAACJ,gBAAI;SAAC;QAAIK,MAAM;;;QAEVJ,MAAM,IAAMK,YAAG;QAAEH,cAAc;;;;;;;;;4BASrC;YAACH,gBAAI;SAAC;QAAIK,MAAM;;;;;;;+BA1BfL,gBAAI"}