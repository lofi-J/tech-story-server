{"version":3,"sources":["../../../src/build-sync/categories/categories.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { PrismaService } from '../../prisma/prisma.service';\nimport { CreateCategoryDto } from './dto/category.dto';\n\n@Injectable()\nexport class CategoriesService {\n  constructor(private prisma: PrismaService) {}\n\n  async getAllCategories() {\n    return await this.prisma.categories.findMany({\n      include: {\n        _count: {\n          select: { posts: true },\n        },\n      },\n      orderBy: { created_at: 'desc' },\n    });\n  }\n\n  async getCategory(id: number) {\n    return await this.prisma.categories.findUnique({\n      where: { id },\n      include: {\n        _count: {\n          select: { posts: true },\n        },\n      },\n    });\n  }\n\n  async getCategoryByName(categoryName: string) {\n    return await this.prisma.categories.findUnique({\n      where: { category_name: categoryName },\n      include: {\n        _count: {\n          select: { posts: true },\n        },\n      },\n    });\n  }\n\n  async createCategory(createCategoryDto: CreateCategoryDto) {\n    return await this.prisma.categories.create({\n      data: createCategoryDto,\n    });\n  }\n\n  async deleteCategory(id: number) {\n    return await this.prisma.categories.delete({\n      where: { id },\n    });\n  }\n}\n"],"names":["CategoriesService","getAllCategories","prisma","categories","findMany","include","_count","select","posts","orderBy","created_at","getCategory","id","findUnique","where","getCategoryByName","categoryName","category_name","createCategory","createCategoryDto","create","data","deleteCategory","delete"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBALc;+BACG;;;;;;;;;;AAIvB,IAAA,AAAMA,oBAAN,MAAMA;IAGX,MAAMC,mBAAmB;QACvB,OAAO,MAAM,IAAI,CAACC,MAAM,CAACC,UAAU,CAACC,QAAQ,CAAC;YAC3CC,SAAS;gBACPC,QAAQ;oBACNC,QAAQ;wBAAEC,OAAO;oBAAK;gBACxB;YACF;YACAC,SAAS;gBAAEC,YAAY;YAAO;QAChC;IACF;IAEA,MAAMC,YAAYC,EAAU,EAAE;QAC5B,OAAO,MAAM,IAAI,CAACV,MAAM,CAACC,UAAU,CAACU,UAAU,CAAC;YAC7CC,OAAO;gBAAEF;YAAG;YACZP,SAAS;gBACPC,QAAQ;oBACNC,QAAQ;wBAAEC,OAAO;oBAAK;gBACxB;YACF;QACF;IACF;IAEA,MAAMO,kBAAkBC,YAAoB,EAAE;QAC5C,OAAO,MAAM,IAAI,CAACd,MAAM,CAACC,UAAU,CAACU,UAAU,CAAC;YAC7CC,OAAO;gBAAEG,eAAeD;YAAa;YACrCX,SAAS;gBACPC,QAAQ;oBACNC,QAAQ;wBAAEC,OAAO;oBAAK;gBACxB;YACF;QACF;IACF;IAEA,MAAMU,eAAeC,iBAAoC,EAAE;QACzD,OAAO,MAAM,IAAI,CAACjB,MAAM,CAACC,UAAU,CAACiB,MAAM,CAAC;YACzCC,MAAMF;QACR;IACF;IAEA,MAAMG,eAAeV,EAAU,EAAE;QAC/B,OAAO,MAAM,IAAI,CAACV,MAAM,CAACC,UAAU,CAACoB,MAAM,CAAC;YACzCT,OAAO;gBAAEF;YAAG;QACd;IACF;IA7CA,YAAY,AAAQV,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AA8C9C"}