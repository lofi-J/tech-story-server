{"version":3,"sources":["../../../../src/build-sync/posts/dto/post.dto.ts"],"sourcesContent":["import { Transform, Type } from 'class-transformer';\nimport {\n  IsArray,\n  IsDateString,\n  IsOptional,\n  IsString,\n  ValidateNested,\n} from 'class-validator';\n\n// 프론트엔드 metadata 구조에 맞는 DTO\nexport class PostMetadataDto {\n  @IsString()\n  slug!: string;\n\n  @IsString()\n  title!: string;\n\n  @IsOptional()\n  @IsString()\n  description?: string;\n\n  @IsOptional()\n  @IsString()\n  thumbnail?: string;\n\n  @IsOptional()\n  @IsString()\n  category?: string;\n\n  @IsOptional()\n  @IsArray()\n  @IsString({ each: true })\n  tags?: string[];\n\n  @IsOptional()\n  @IsDateString()\n  published?: string | Date;\n}\n\nexport class CreatePostDto {\n  @ValidateNested()\n  @Type(() => PostMetadataDto)\n  metadata!: PostMetadataDto;\n\n  @Transform(({ value }) => (typeof value === 'string' ? value : String(value)))\n  @IsString()\n  hash_code!: string;\n}\n\n// 업데이트용 DTO (필요시 사용)\nexport class UpdatePostDto {\n  @IsOptional()\n  @ValidateNested()\n  @Type(() => PostMetadataDto)\n  metadata?: PostMetadataDto;\n\n  @IsOptional()\n  @Transform(({ value }) => (typeof value === 'string' ? value : String(value)))\n  @IsString()\n  hash_code?: string;\n}\n\n// Prisma에서 반환하는 포스트 객체 타입 (관계 포함)\nexport interface PostWithRelations {\n  id: number;\n  slug: string;\n  title: string;\n  description: string | null;\n  thumbnail: string | null;\n  hash_code: string;\n  published: Date | null;\n  updated_at: Date | null;\n  category_id: number | null;\n  categories: {\n    id: number;\n    category_name: string;\n    created_at: Date | null;\n  } | null;\n  post_tags: Array<{\n    post_id: number;\n    tag_id: number;\n    tags: {\n      id: number;\n      tag_name: string;\n      created_at: Date | null;\n    };\n  }>;\n}\n\n// 프론트엔드가 기대하는 응답 구조\nexport interface PostResponse {\n  id: number;\n  slug: string;\n  title: string;\n  description: string;\n  thumbnail: string | null;\n  hash_code: string;\n  category: string;\n  published: string | null;\n  updated_at: string;\n}\n"],"names":["CreatePostDto","PostMetadataDto","UpdatePostDto","each","value","String"],"mappings":";;;;;;;;;;;QAuCaA;eAAAA;;QA7BAC;eAAAA;;QAwCAC;eAAAA;;;kCAlDmB;gCAOzB;;;;;;;;;;AAGA,IAAA,AAAMD,kBAAN,MAAMA;AA2Bb;;;;;;;;;;;;;;;;;;;;;;;;;;;;QANcE,MAAM;;;;;;;;;AAQb,IAAA,AAAMH,gBAAN,MAAMA;AAQb;;;oCANcC;;;;sCAGA,EAAEG,KAAK,EAAE,GAAM,OAAOA,UAAU,WAAWA,QAAQC,OAAOD;;;;AAMjE,IAAA,AAAMF,gBAAN,MAAMA;AAUb;;;;oCAPcD;;;;;sCAIA,EAAEG,KAAK,EAAE,GAAM,OAAOA,UAAU,WAAWA,QAAQC,OAAOD"}