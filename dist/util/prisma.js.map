{"version":3,"sources":["../../src/util/prisma.ts"],"sourcesContent":["import { HttpException, HttpStatus } from '@nestjs/common';\nimport { Prisma } from '@prisma/client';\n\nexport const isPrismaError = (\n  error: unknown,\n): error is Prisma.PrismaClientKnownRequestError => {\n  return error instanceof Prisma.PrismaClientKnownRequestError;\n};\n\nexport const handlePrismaError = (\n  error: Prisma.PrismaClientKnownRequestError,\n) => {\n  switch (error.code) {\n    case 'P2002':\n      throw new HttpException(\n        'Unique constraint violation',\n        HttpStatus.CONFLICT,\n      );\n\n    case 'P2003':\n      throw new HttpException(\n        'Foreign key constraint violation',\n        HttpStatus.BAD_REQUEST,\n      );\n\n    case 'P2025':\n      throw new HttpException('Record not found', HttpStatus.NOT_FOUND);\n\n    case 'P2014':\n      throw new HttpException('Invalid ID', HttpStatus.BAD_REQUEST);\n\n    case 'P2021':\n      throw new HttpException(\n        'Table does not exist',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n\n    case 'P2022':\n      throw new HttpException(\n        'Column does not exist',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n\n    default:\n      // 기타 Prisma 에러 (추후 추가)\n      console.error('Unknown Prisma error:', error);\n      throw new HttpException(\n        '데이터베이스 오류가 발생했습니다(default prisma error)',\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n  }\n};\n"],"names":["handlePrismaError","isPrismaError","error","Prisma","PrismaClientKnownRequestError","code","HttpException","HttpStatus","CONFLICT","BAD_REQUEST","NOT_FOUND","INTERNAL_SERVER_ERROR","console"],"mappings":";;;;;;;;;;;QASaA;eAAAA;;QANAC;eAAAA;;;wBAH6B;wBACnB;AAEhB,MAAMA,gBAAgB,CAC3BC;IAEA,OAAOA,iBAAiBC,cAAM,CAACC,6BAA6B;AAC9D;AAEO,MAAMJ,oBAAoB,CAC/BE;IAEA,OAAQA,MAAMG,IAAI;QAChB,KAAK;YACH,MAAM,IAAIC,qBAAa,CACrB,+BACAC,kBAAU,CAACC,QAAQ;QAGvB,KAAK;YACH,MAAM,IAAIF,qBAAa,CACrB,oCACAC,kBAAU,CAACE,WAAW;QAG1B,KAAK;YACH,MAAM,IAAIH,qBAAa,CAAC,oBAAoBC,kBAAU,CAACG,SAAS;QAElE,KAAK;YACH,MAAM,IAAIJ,qBAAa,CAAC,cAAcC,kBAAU,CAACE,WAAW;QAE9D,KAAK;YACH,MAAM,IAAIH,qBAAa,CACrB,wBACAC,kBAAU,CAACI,qBAAqB;QAGpC,KAAK;YACH,MAAM,IAAIL,qBAAa,CACrB,yBACAC,kBAAU,CAACI,qBAAqB;QAGpC;YACE,uBAAuB;YACvBC,QAAQV,KAAK,CAAC,yBAAyBA;YACvC,MAAM,IAAII,qBAAa,CACrB,2CACAC,kBAAU,CAACI,qBAAqB;IAEtC;AACF"}